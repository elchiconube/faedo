---
/**
 * MapLeaflet.astro
 * Uso: <MapLeaflet lat={42.8389} lng={-5.6347} zoom={14} height="360px" />
 */
import "leaflet/dist/leaflet.css";

interface Props {
  lat: number;
  lng: number;
  zoom?: number;
  height?: string;
}
const { lat, lng, zoom = 14, height = "320px" } = Astro.props as Props;
const mapId = `map-${Math.random().toString(36).slice(2, 9)}`;
---

<div class="w-full" style={`height:${height};`}>
  <div
    id={mapId}
    class="w-full h-full rounded-md overflow-hidden"
    data-leaflet-map="1"
    data-lat={lat}
    data-lng={lng}
    data-zoom={zoom}
    style="height:100%;"
  >
  </div>
  <noscript>
    <p class="p-3 text-sm text-gray-600">
      Mapa interactivo disponible con JavaScript habilitado. Coordenadas: {lat}, {
        lng
      }
    </p>
  </noscript>
</div>

<script type="module" src="../scripts/map-leaflet.ts"></script>
